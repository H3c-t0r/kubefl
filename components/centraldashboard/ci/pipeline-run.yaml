apiVersion: tekton.dev/v1alpha1
kind: PipelineRun
metadata:
  name: ci-centraldashboard
  namespace: kubeflow-test-infra
spec:
  pipelineRef:
    name: ci-pipeline
  params:
  - name: container_image
    value: $(container_image)
  - name: docker_target
    value: $(docker_target)
  - name: image_name
    value: $(image_name)
  - name: path_to_context
    value: $(path_to_context)
  - name: path_to_docker_file
    value: $(path_to_docker_file)
  - name: path_to_manifests_dir
    value: $(path_to_manifests_dir)
  - name: pull_request_id
    value: $(pull_request_id)
  - name: pull_request_repo
    value: $(pull_request_repo)
  resources:
  - name: $(pull_request_repo)
    resourceRef:
      name: $(pull_request_repo)
  - name: manifests
    resourceRef:
      name: manifests
  - name: $(image_name)
    resourceRef:
      name: $(image_name)
  - name: $(pull_request_repo)-$(pull_request_id)
    resourceRef:
      name: $(pull_request_repo)-$(pull_request_id) 
  serviceAccount: ci-pipeline-run-service-account
