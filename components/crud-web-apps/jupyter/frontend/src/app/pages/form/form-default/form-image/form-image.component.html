<lib-form-section
  title="Image"
  text="A starter Notebook Image with a baseline deployment and typical
  ML packages"
  icon="fa:fab:docker"
>
  <div class="flex-column">
    <mat-checkbox
      *ngIf="allowCustomImage"
      [formControl]="parentForm.get('customImageCheck')"
    >
      Custom Image
    </mat-checkbox>
  </div>

  <!--dropdown input-->
  <mat-form-field
    class="wide"
    appearance="outline"
    *ngIf="!parentForm?.value.customImageCheck"
  >
    <mat-label>{{ imagesInputLabel }}</mat-label>
    <mat-select [formControl]="parentForm.get('image')">
      <!--Jupyter images-->
      <mat-optgroup label="Jupyter" *ngIf="imagesJupyter?.length">
        <mat-option *ngFor="let img of imagesJupyter" [value]="img">
          {{ img }}
        </mat-option>
      </mat-optgroup>

      <!--VSCode images-->
      <mat-optgroup label="VSCode" *ngIf="imagesVSCode?.length">
        <mat-option *ngFor="let img of imagesVSCode" [value]="img">
          {{ img }}
        </mat-option>
      </mat-optgroup>

      <!--RStudio images-->
      <mat-optgroup label="RStudio" *ngIf="imagesRStudio?.length">
        <mat-option *ngFor="let img of imagesRStudio" [value]="img">
          {{ img }}
        </mat-option>
      </mat-optgroup>
    </mat-select>
  </mat-form-field>

  <!--custom image input-->
  <mat-form-field
    class="wide"
    appearance="outline"
    *ngIf="parentForm?.value.customImageCheck"
  >
    <mat-label>Custom Image</mat-label>
    <input
      matInput
      placeholder="Provide a custom Image"
      [formControl]="parentForm.get('customImage')"
      #cstmimg
    />
    <mat-error>Please provide and Image to use</mat-error>
  </mat-form-field>

  <lib-advanced-options>
    <div class="row">
      <mat-form-field class="column" appearance="outline">
        <mat-label>Image pull policy</mat-label>
        <mat-select [formControl]="parentForm.get('imagePullPolicy')">
          <mat-option value="Always">Always</mat-option>
          <mat-option value="IfNotPresent">IfNotPresent</mat-option>
          <mat-option value="Never">Never</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </lib-advanced-options>
</lib-form-section>
