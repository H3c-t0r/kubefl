"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _objectWithoutPropertiesLoose=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),_extends=require("@babel/runtime/helpers/extends"),primitives=require("@react-pdf/primitives"),React=require("react"),queue=require("queue"),_asyncToGenerator=require("@babel/runtime/helpers/asyncToGenerator"),_regeneratorRuntime=require("@babel/runtime/regenerator"),BlobStream=require("blob-stream"),FontStore=require("@react-pdf/font"),renderPDF=require("@react-pdf/render"),PDFDocument=require("@react-pdf/pdfkit"),layoutDocument=require("@react-pdf/layout"),ReactFiberReconciler=require("react-reconciler"),scheduler=require("scheduler");function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}}),r.default=e,Object.freeze(r)}var renderer,_objectWithoutPropertiesLoose__default=_interopDefaultLegacy(_objectWithoutPropertiesLoose),_extends__default=_interopDefaultLegacy(_extends),primitives__namespace=_interopNamespace(primitives),React__default=_interopDefaultLegacy(React),queue__default=_interopDefaultLegacy(queue),_asyncToGenerator__default=_interopDefaultLegacy(_asyncToGenerator),_regeneratorRuntime__default=_interopDefaultLegacy(_regeneratorRuntime),BlobStream__default=_interopDefaultLegacy(BlobStream),FontStore__default=_interopDefaultLegacy(FontStore),renderPDF__default=_interopDefaultLegacy(renderPDF),PDFDocument__default=_interopDefaultLegacy(PDFDocument),layoutDocument__default=_interopDefaultLegacy(layoutDocument),ReactFiberReconciler__default=_interopDefaultLegacy(ReactFiberReconciler),propsEqual=function e(r,t){var n=Object.keys(r),o=Object.keys(t);if(n.length!==o.length)return!1;for(var u=0;u<n.length;u+=1){var a=n[u];if("render"===a&&!r[a]!=!t[a])return!1;if("children"!==a&&r[a]!==t[a]){if("object"==typeof r[a]&&"object"==typeof t[a]&&e(r[a],t[a]))continue;return!1}if("children"===a&&("string"==typeof r[a]||"string"==typeof t[a]))return r[a]===t[a]}return!0},emptyObject={},createRenderer=function(e){var r=e.onChange,t=void 0===r?function(){}:r;return ReactFiberReconciler__default.default({schedulePassiveEffects:scheduler.unstable_scheduleCallback,cancelPassiveEffects:scheduler.unstable_cancelCallback,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild:function(e,r){e.children.push(r)},createInstance:function(e,r){var t=r.style;return r.children,{type:e,box:{},style:t||{},props:_objectWithoutPropertiesLoose__default.default(r,["style","children"])||{},children:[]}},createTextInstance:function(e,r){return{type:"TEXT_INSTANCE",value:e}},finalizeInitialChildren:function(e,r,t){return!1},getPublicInstance:function(e){return e},prepareForCommit:function(){},clearContainer:function(){},prepareUpdate:function(e,r,t,n){return!propsEqual(t,n)},resetAfterCommit:t,resetTextContent:function(e){},getRootHostContext:function(){return emptyObject},getChildHostContext:function(){return emptyObject},shouldSetTextContent:function(e,r){return!1},now:Date.now,useSyncScheduling:!0,appendChild:function(e,r){e.children.push(r)},appendChildToContainer:function(e,r){"ROOT"===e.type?e.document=r:e.children.push(r)},insertBefore:function(e,r,t){var n,o=null===(n=e.children)||void 0===n?void 0:n.indexOf(t);void 0!==o&&-1!==o&&r&&e.children.splice(o,0,r)},removeChild:function(e,r){var t,n=null===(t=e.children)||void 0===t?void 0:t.indexOf(r);void 0!==n&&-1!==n&&e.children.splice(n,1)},removeChildFromContainer:function(e,r){var t,n=null===(t=e.children)||void 0===t?void 0:t.indexOf(r);void 0!==n&&-1!==n&&e.children.splice(n,1)},commitTextUpdate:function(e,r,t){e.value=t},commitUpdate:function(e,r,t,n,o){var u=o.style,a=_objectWithoutPropertiesLoose__default.default(o,["style"]);e.props=a,e.style=u}})},version="2.0.17",fontStore=new FontStore__default.default,pdf=function(e){var r={},t={type:"ROOT",document:null},n=(renderer=renderer||createRenderer({onChange:function(){for(var e,t=(null===(e=r.change)||void 0===e?void 0:e.slice())||[],n=0;n<t.length;n+=1)t[n]()}})).createContainer(t),o=function(e){renderer.updateContainer(e,n,null)};e&&o(e);var u=function(){var e=_asyncToGenerator__default.default(_regeneratorRuntime__default.default.mark(function e(r){var n,o,u,a,i;return _regeneratorRuntime__default.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!0),n=t.document.props||{},o=n.pdfVersion,u=n.language,a=new PDFDocument__default.default({compress:r,pdfVersion:o,lang:u,displayTitle:!0,autoFirstPage:!1}),e.next=6,layoutDocument__default.default(t.document,fontStore);case 6:return i=e.sent,e.abrupt("return",renderPDF__default.default(a,i));case 8:case"end":return e.stop()}},e)}));return function(r){return e.apply(this,arguments)}}(),a=function(e){void 0===e&&(e={}),t.document.props.onRender&&t.document.props.onRender(e)};return{on:function(e,t){r[e]||(r[e]=[]),r[e].push(t)},container:t,toBlob:function(){var e=_asyncToGenerator__default.default(_regeneratorRuntime__default.default.mark(function e(){var r,t;return _regeneratorRuntime__default.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return r=e.sent,t=r.pipe(BlobStream__default.default()),e.abrupt("return",new Promise(function(e,r){t.on("finish",function(){try{var n=t.toBlob("application/pdf");a({blob:n}),e(n)}catch(e){r(e)}}),t.on("error",r)}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),toBuffer:function(){var e=_asyncToGenerator__default.default(_regeneratorRuntime__default.default.mark(function e(){return _regeneratorRuntime__default.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.abrupt("return",u());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),toString:function(){var e=_asyncToGenerator__default.default(_regeneratorRuntime__default.default.mark(function e(){var r,t;return _regeneratorRuntime__default.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.next=3,u(!1);case 3:return t=e.sent,e.abrupt("return",new Promise(function(e,n){try{t.on("data",function(e){r+=e}),t.on("end",function(){a(),e(r)})}catch(e){n(e)}}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),removeListener:function(e,t){if(r[e]){var n=r[e].indexOf(t);n>-1&&r[e].splice(n,1)}},updateContainer:o}},Font=fontStore,StyleSheet={create:function(e){return e}},usePDF=function(e){var r=e.document,t=React.useRef(null),n=React.useState({url:null,blob:null,error:null,loading:!1}),o=n[0],u=n[1];React.useEffect(function(){var e=queue__default.default({autostart:!0,concurrency:1}),n=function(){u(function(e){return _extends__default.default({},e,{loading:!0})}),e.splice(0,e.length,function(){return o.error?Promise.resolve():t.current.toBlob()})};return t.current=pdf(),t.current.on("change",n),t.current.updateContainer(r),e.on("error",function(e){console.error(e),u(function(r){return _extends__default.default({},r,{error:e})})}),e.on("success",function(e){u({blob:e,error:null,loading:!1,url:URL.createObjectURL(e)})}),function(){e.end(),t.current.removeListener("change",n)}},[]),React.useEffect(function(){return function(){o.url&&URL.revokeObjectURL(o.url)}},[o.url]);return[o,function(){t.current.updateContainer(r)}]},BlobProvider=function(e){var r=e.document,t=e.children,n=usePDF({document:r}),o=n[0],u=n[1];return React.useEffect(u,[r]),r?t(o):(console.warn("You should pass a valid document to BlobProvider"),null)},PDFViewer=function(e){var r=e.title,t=e.style,n=e.className,o=e.children,u=e.innerRef,a=e.showToolbar,i=void 0===a||a,c=_objectWithoutPropertiesLoose__default.default(e,["title","style","className","children","innerRef","showToolbar"]),l=usePDF({document:o}),d=l[0],f=l[1];return React.useEffect(f,[o]),React__default.default.createElement("iframe",_extends__default.default({title:r,ref:u,style:t,src:d.url+"#toolbar="+(i?1:0),className:n},c))},PDFDownloadLink=function(e){var r=e.style,t=e.children,n=e.className,o=e.document,u=e.fileName,a=void 0===u?"document.pdf":u,i=usePDF({document:o}),c=i[0],l=i[1];if(React.useEffect(l,[t]),!o)return console.warn("You should pass a valid document to PDFDownloadLink"),null;return React__default.default.createElement("a",{style:r,href:c.url,download:a,className:n,onClick:function(){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(c.blob,a)}},"function"==typeof t?t(c):t)},throwEnvironmentError=function(e){throw new Error(e+" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.")},renderToStream=function(){throwEnvironmentError("renderToStream")},renderToString=function(){throwEnvironmentError("renderToString")},renderToFile=function(){throwEnvironmentError("renderToFile")},render=function(){throwEnvironmentError("render")},dom=_extends__default.default({pdf:pdf,usePDF:usePDF,Font:Font,version:version,StyleSheet:StyleSheet,PDFViewer:PDFViewer,BlobProvider:BlobProvider,PDFDownloadLink:PDFDownloadLink,renderToStream:renderToStream,renderToString:renderToString,renderToFile:renderToFile,render:render},primitives__namespace);exports.BlobProvider=BlobProvider,exports.Font=Font,exports.PDFDownloadLink=PDFDownloadLink,exports.PDFViewer=PDFViewer,exports.StyleSheet=StyleSheet,exports.createRenderer=createRenderer,exports.default=dom,exports.pdf=pdf,exports.render=render,exports.renderToFile=renderToFile,exports.renderToStream=renderToStream,exports.renderToString=renderToString,exports.usePDF=usePDF,exports.version=version,Object.keys(primitives).forEach(function(e){"default"===e||exports.hasOwnProperty(e)||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return primitives[e]}})});
//# sourceMappingURL=react-pdf.browser.cjs.min.js.map
