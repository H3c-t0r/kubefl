{"ast":null,"code":"var _jsxFileName = \"/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/src/containers/products.js\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { Box, Button, Card, Container, Divider, Typography } from '@material-ui/core';\nimport { productApi } from '../api/product';\nimport { ProductCreateDialog } from '../components/product/product-create-dialog';\nimport { ProductsFilter } from '../components/product/products-filter';\nimport { ProductsSummary } from '../components/product/products-summary';\nimport { ProductsTable } from '../components/product/products-table';\nimport { useMounted } from '../hooks/use-mounted';\nimport { useSelection } from '../hooks/use-selection';\nimport { Plus as PlusIcon } from '../icons/plus';\nimport gtm from '../lib/gtm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Products = () => {\n  _s();\n\n  var _productsState$data, _productsState$data2, _productsState$data3;\n\n  const mounted = useMounted();\n  const [controller, setController] = useState({\n    filters: [],\n    page: 0,\n    query: '',\n    sort: 'desc',\n    sortBy: 'updatedAt',\n    view: 'all'\n  });\n  const [productsState, setProductsState] = useState({\n    isLoading: true\n  });\n  const [selectedProducts, handleSelect, handleSelectAll] = useSelection((_productsState$data = productsState.data) === null || _productsState$data === void 0 ? void 0 : _productsState$data.products);\n  const [openCreateDialog, setOpenCreateDialog] = useState(false);\n  const getProducts = useCallback(async () => {\n    setProductsState(() => ({\n      isLoading: true\n    }));\n\n    try {\n      const result = await productApi.getProducts({\n        filters: controller.filters,\n        page: controller.page,\n        query: controller.query,\n        sort: controller.sort,\n        sortBy: controller.sortBy,\n        view: controller.view\n      });\n\n      if (mounted.current) {\n        setProductsState(() => ({\n          isLoading: false,\n          data: result\n        }));\n      }\n    } catch (err) {\n      console.error(err);\n\n      if (mounted.current) {\n        setProductsState(() => ({\n          isLoading: false,\n          error: err.message\n        }));\n      }\n    }\n  }, [controller]);\n  useEffect(() => {\n    getProducts().catch(console.error);\n  }, [controller]);\n  useEffect(() => {\n    gtm.push({\n      event: 'page_view'\n    });\n  }, []);\n\n  const handleViewChange = newView => {\n    setController({ ...controller,\n      page: 0,\n      view: newView\n    });\n  };\n\n  const handleQueryChange = newQuery => {\n    setController({ ...controller,\n      page: 0,\n      query: newQuery\n    });\n  };\n\n  const handleFiltersApply = newFilters => {\n    const parsedFilters = newFilters.map(filter => ({\n      property: filter.property.name,\n      value: filter.value,\n      operator: filter.operator.value\n    }));\n    setController({ ...controller,\n      page: 0,\n      filters: parsedFilters\n    });\n  };\n\n  const handleFiltersClear = () => {\n    setController({ ...controller,\n      page: 0,\n      filters: []\n    });\n  };\n\n  const handlePageChange = newPage => {\n    setController({ ...controller,\n      page: newPage - 1\n    });\n  };\n\n  const handleSortChange = (event, property) => {\n    const isAsc = controller.sortBy === property && controller.sort === 'asc';\n    setController({ ...controller,\n      page: 0,\n      sort: isAsc ? 'desc' : 'asc',\n      sortBy: property\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Product: List | Carpatin Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        backgroundColor: 'background.default',\n        flexGrow: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          height: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            py: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              alignItems: 'center',\n              display: 'flex'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              color: \"textPrimary\",\n              variant: \"h4\",\n              children: \"Products\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                flexGrow: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              onClick: () => setOpenCreateDialog(true),\n              size: \"large\",\n              startIcon: /*#__PURE__*/_jsxDEV(PlusIcon, {\n                fontSize: \"small\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 28\n              }, this),\n              variant: \"contained\",\n              children: \"Add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProductsSummary, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          variant: \"outlined\",\n          sx: {\n            display: 'flex',\n            flexDirection: 'column',\n            flexGrow: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(ProductsFilter, {\n            disabled: productsState.isLoading,\n            filters: controller.filters,\n            onFiltersApply: handleFiltersApply,\n            onFiltersClear: handleFiltersClear,\n            onQueryChange: handleQueryChange,\n            onViewChange: handleViewChange,\n            query: controller.query,\n            selectedProducts: selectedProducts,\n            view: controller.view\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ProductsTable, {\n            error: productsState.error,\n            isLoading: productsState.isLoading,\n            onPageChange: handlePageChange,\n            onSelect: handleSelect,\n            onSelectAll: handleSelectAll,\n            onSortChange: handleSortChange,\n            page: controller.page + 1,\n            products: (_productsState$data2 = productsState.data) === null || _productsState$data2 === void 0 ? void 0 : _productsState$data2.products,\n            productsCount: (_productsState$data3 = productsState.data) === null || _productsState$data3 === void 0 ? void 0 : _productsState$data3.productsCount,\n            selectedProducts: selectedProducts,\n            sort: controller.sort,\n            sortBy: controller.sortBy\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductCreateDialog, {\n      onClose: () => setOpenCreateDialog(false),\n      open: openCreateDialog\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Products, \"vDXnS/eD6x54XDLy51tcqBa2PR0=\", false, function () {\n  return [useMounted, useSelection];\n});\n\n_c = Products;\n\nvar _c;\n\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"sources":["/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/src/containers/products.js"],"names":["useCallback","useEffect","useState","Helmet","Box","Button","Card","Container","Divider","Typography","productApi","ProductCreateDialog","ProductsFilter","ProductsSummary","ProductsTable","useMounted","useSelection","Plus","PlusIcon","gtm","Products","mounted","controller","setController","filters","page","query","sort","sortBy","view","productsState","setProductsState","isLoading","selectedProducts","handleSelect","handleSelectAll","data","products","openCreateDialog","setOpenCreateDialog","getProducts","result","current","err","console","error","message","catch","push","event","handleViewChange","newView","handleQueryChange","newQuery","handleFiltersApply","newFilters","parsedFilters","map","filter","property","name","value","operator","handleFiltersClear","handlePageChange","newPage","handleSortChange","isAsc","backgroundColor","flexGrow","display","flexDirection","height","py","alignItems","productsCount"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { Box, Button, Card, Container, Divider, Typography } from '@material-ui/core';\nimport { productApi } from '../api/product';\nimport { ProductCreateDialog } from '../components/product/product-create-dialog';\nimport { ProductsFilter } from '../components/product/products-filter';\nimport { ProductsSummary } from '../components/product/products-summary';\nimport { ProductsTable } from '../components/product/products-table';\nimport { useMounted } from '../hooks/use-mounted';\nimport { useSelection } from '../hooks/use-selection';\nimport { Plus as PlusIcon } from '../icons/plus';\nimport gtm from '../lib/gtm';\n\nexport const Products = () => {\n  const mounted = useMounted();\n  const [controller, setController] = useState({\n    filters: [],\n    page: 0,\n    query: '',\n    sort: 'desc',\n    sortBy: 'updatedAt',\n    view: 'all'\n  });\n  const [productsState, setProductsState] = useState({ isLoading: true });\n  const [\n    selectedProducts,\n    handleSelect,\n    handleSelectAll\n  ] = useSelection(productsState.data?.products);\n  const [openCreateDialog, setOpenCreateDialog] = useState(false);\n\n  const getProducts = useCallback(async () => {\n    setProductsState(() => ({ isLoading: true }));\n\n    try {\n      const result = await productApi.getProducts({\n        filters: controller.filters,\n        page: controller.page,\n        query: controller.query,\n        sort: controller.sort,\n        sortBy: controller.sortBy,\n        view: controller.view\n      });\n\n      if (mounted.current) {\n        setProductsState(() => ({\n          isLoading: false,\n          data: result\n        }));\n      }\n    } catch (err) {\n      console.error(err);\n\n      if (mounted.current) {\n        setProductsState(() => ({\n          isLoading: false,\n          error: err.message\n        }));\n      }\n    }\n  }, [controller]);\n\n  useEffect(() => {\n    getProducts().catch(console.error);\n  }, [controller]);\n\n  useEffect(() => {\n    gtm.push({ event: 'page_view' });\n  }, []);\n\n  const handleViewChange = (newView) => {\n    setController({\n      ...controller,\n      page: 0,\n      view: newView\n    });\n  };\n\n  const handleQueryChange = (newQuery) => {\n    setController({\n      ...controller,\n      page: 0,\n      query: newQuery\n    });\n  };\n\n  const handleFiltersApply = (newFilters) => {\n    const parsedFilters = newFilters.map((filter) => ({\n      property: filter.property.name,\n      value: filter.value,\n      operator: filter.operator.value\n    }));\n\n    setController({\n      ...controller,\n      page: 0,\n      filters: parsedFilters\n    });\n  };\n\n  const handleFiltersClear = () => {\n    setController({\n      ...controller,\n      page: 0,\n      filters: []\n    });\n  };\n\n  const handlePageChange = (newPage) => {\n    setController({\n      ...controller,\n      page: newPage - 1\n    });\n  };\n\n  const handleSortChange = (event, property) => {\n    const isAsc = controller.sortBy === property && controller.sort === 'asc';\n\n    setController({\n      ...controller,\n      page: 0,\n      sort: isAsc ? 'desc' : 'asc',\n      sortBy: property\n    });\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>Product: List | Carpatin Dashboard</title>\n      </Helmet>\n      <Box\n        sx={{\n          backgroundColor: 'background.default',\n          flexGrow: 1\n        }}\n      >\n        <Container\n          maxWidth=\"lg\"\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            height: '100%'\n          }}\n        >\n          <Box sx={{ py: 4 }}>\n            <Box\n              sx={{\n                alignItems: 'center',\n                display: 'flex'\n              }}\n            >\n              <Typography\n                color=\"textPrimary\"\n                variant=\"h4\"\n              >\n                Products\n              </Typography>\n              <Box sx={{ flexGrow: 1 }} />\n              <Button\n                color=\"primary\"\n                onClick={() => setOpenCreateDialog(true)}\n                size=\"large\"\n                startIcon={<PlusIcon fontSize=\"small\" />}\n                variant=\"contained\"\n              >\n                Add\n              </Button>\n            </Box>\n          </Box>\n          <ProductsSummary />\n          <Card\n            variant=\"outlined\"\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              flexGrow: 1\n            }}\n          >\n            <ProductsFilter\n              disabled={productsState.isLoading}\n              filters={controller.filters}\n              onFiltersApply={handleFiltersApply}\n              onFiltersClear={handleFiltersClear}\n              onQueryChange={handleQueryChange}\n              onViewChange={handleViewChange}\n              query={controller.query}\n              selectedProducts={selectedProducts}\n              view={controller.view}\n            />\n            <Divider />\n            <ProductsTable\n              error={productsState.error}\n              isLoading={productsState.isLoading}\n              onPageChange={handlePageChange}\n              onSelect={handleSelect}\n              onSelectAll={handleSelectAll}\n              onSortChange={handleSortChange}\n              page={controller.page + 1}\n              products={productsState.data?.products}\n              productsCount={productsState.data?.productsCount}\n              selectedProducts={selectedProducts}\n              sort={controller.sort}\n              sortBy={controller.sortBy}\n            />\n          </Card>\n        </Container>\n      </Box>\n      <ProductCreateDialog\n        onClose={() => setOpenCreateDialog(false)}\n        open={openCreateDialog}\n      />\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}