{"ast":null,"code":"var _jsxFileName = \"/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/src/containers/verify-code.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { Link as RouterLink, useLocation, useNavigate } from 'react-router-dom';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { AppBar, Box, Button, Card, CardContent, Container, FormHelperText, Grid, Toolbar, Typography } from '@material-ui/core';\nimport { ProductFeatures } from '../components/auth/product-features';\nimport { InputField } from '../components/input-field';\nimport { Logo } from '../components/logo';\nimport { useSettings } from '../contexts/settings-context';\nimport { useAuth } from '../hooks/use-auth';\nimport { useMounted } from '../hooks/use-mounted';\nimport gtm from '../lib/gtm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const VerifyCode = () => {\n  _s();\n\n  var _location$state, _location$state2, _location$state3;\n\n  const mounted = useMounted();\n  const {\n    verifyCode\n  } = useAuth();\n  const {\n    settings\n  } = useSettings();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const formik = useFormik({\n    initialValues: {\n      email: ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.username) || '',\n      code: '',\n      submit: null\n    },\n    validationSchema: Yup.object().shape({\n      code: Yup.string().max(6).required('Code is required'),\n      email: Yup.string().email('Must be a valid email').max(255).required('Email is required')\n    }),\n    onSubmit: async (values, {\n      setErrors,\n      setStatus,\n      setSubmitting\n    }) => {\n      try {\n        await (verifyCode === null || verifyCode === void 0 ? void 0 : verifyCode(values.email, values.code));\n        navigate('/login');\n      } catch (err) {\n        console.error(err);\n\n        if (mounted.current) {\n          setStatus({\n            success: false\n          });\n          setErrors({\n            submit: err.message\n          });\n          setSubmitting(false);\n        }\n      }\n    }\n  });\n  useEffect(() => {\n    gtm.push({\n      event: 'page_view'\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Verify Code | Carpatin Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AppBar, {\n      elevation: 0,\n      sx: {\n        backgroundColor: 'background.paper'\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"md\",\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          disableGutters: true,\n          sx: {\n            height: 64\n          },\n          children: /*#__PURE__*/_jsxDEV(RouterLink, {\n            to: \"/\",\n            children: /*#__PURE__*/_jsxDEV(Logo, {\n              variant: settings.theme === 'dark' ? 'light' : 'dark'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        backgroundColor: 'background.default',\n        minHeight: '100%',\n        pt: '64px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          py: 9\n        },\n        children: /*#__PURE__*/_jsxDEV(Container, {\n          maxWidth: \"md\",\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 6,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              md: 6,\n              sx: {\n                display: {\n                  md: 'block',\n                  xs: 'none'\n                }\n              },\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(ProductFeatures, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              md: 6,\n              xs: 12,\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                sx: {\n                  backgroundColor: 'background.default'\n                },\n                elevation: 0,\n                children: /*#__PURE__*/_jsxDEV(CardContent, {\n                  children: /*#__PURE__*/_jsxDEV(\"form\", {\n                    onSubmit: formik.handleSubmit,\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      color: \"textPrimary\",\n                      sx: {\n                        mb: 3\n                      },\n                      variant: \"h4\",\n                      children: \"Verify code\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 119,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                      container: true,\n                      spacing: 2,\n                      children: [/*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        xs: 12,\n                        children: /*#__PURE__*/_jsxDEV(InputField, {\n                          autoFocus: true,\n                          disabled: !!((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.username),\n                          error: Boolean(formik.touched.email && formik.errors.email),\n                          fullWidth: true,\n                          helperText: formik.touched.email && formik.errors.email,\n                          label: \"Email Address\",\n                          name: \"email\",\n                          onBlur: formik.handleBlur,\n                          onChange: formik.handleChange,\n                          type: \"email\",\n                          value: formik.values.email\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 134,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 130,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        xs: 12,\n                        children: /*#__PURE__*/_jsxDEV(InputField, {\n                          autoFocus: !!((_location$state3 = location.state) === null || _location$state3 === void 0 ? void 0 : _location$state3.username),\n                          error: Boolean(formik.touched.code && formik.errors.code),\n                          fullWidth: true,\n                          helperText: formik.touched.code && formik.errors.code,\n                          label: \"Verification code\",\n                          name: \"code\",\n                          onBlur: formik.handleBlur,\n                          onChange: formik.handleChange,\n                          value: formik.values.code\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 152,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 148,\n                        columnNumber: 25\n                      }, this), formik.errors.submit && /*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        xs: 12,\n                        children: /*#__PURE__*/_jsxDEV(FormHelperText, {\n                          error: true,\n                          children: formik.errors.submit\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 169,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        xs: 12,\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          color: \"primary\",\n                          disabled: formik.isSubmitting,\n                          fullWidth: true,\n                          size: \"large\",\n                          type: \"submit\",\n                          variant: \"contained\",\n                          children: \"Verify Code\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 178,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 174,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(VerifyCode, \"JlHjD3JzdtPtKey0B2XJ1D8ZUUE=\", false, function () {\n  return [useMounted, useAuth, useSettings, useLocation, useNavigate, useFormik];\n});\n\n_c = VerifyCode;\n\nvar _c;\n\n$RefreshReg$(_c, \"VerifyCode\");","map":{"version":3,"sources":["/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/src/containers/verify-code.js"],"names":["useEffect","Helmet","Link","RouterLink","useLocation","useNavigate","useFormik","Yup","AppBar","Box","Button","Card","CardContent","Container","FormHelperText","Grid","Toolbar","Typography","ProductFeatures","InputField","Logo","useSettings","useAuth","useMounted","gtm","VerifyCode","mounted","verifyCode","settings","location","navigate","formik","initialValues","email","state","username","code","submit","validationSchema","object","shape","string","max","required","onSubmit","values","setErrors","setStatus","setSubmitting","err","console","error","current","success","message","push","event","backgroundColor","height","theme","minHeight","pt","py","display","md","xs","handleSubmit","mb","Boolean","touched","errors","handleBlur","handleChange","isSubmitting"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport { Link as RouterLink, useLocation, useNavigate } from 'react-router-dom';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport {\n  AppBar,\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Container,\n  FormHelperText,\n  Grid,\n  Toolbar,\n  Typography\n} from '@material-ui/core';\nimport { ProductFeatures } from '../components/auth/product-features';\nimport { InputField } from '../components/input-field';\nimport { Logo } from '../components/logo';\nimport { useSettings } from '../contexts/settings-context';\nimport { useAuth } from '../hooks/use-auth';\nimport { useMounted } from '../hooks/use-mounted';\nimport gtm from '../lib/gtm';\n\nexport const VerifyCode = () => {\n  const mounted = useMounted();\n  const { verifyCode } = useAuth();\n  const { settings } = useSettings();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const formik = useFormik({\n    initialValues: {\n      email: location.state?.username || '',\n      code: '',\n      submit: null\n    },\n    validationSchema: Yup.object().shape({\n      code: Yup.string().max(6).required('Code is required'),\n      email: Yup.string().email('Must be a valid email').max(255).required('Email is required')\n    }),\n    onSubmit: async (values, { setErrors, setStatus, setSubmitting }) => {\n      try {\n        await verifyCode?.(values.email, values.code);\n\n        navigate('/login');\n      } catch (err) {\n        console.error(err);\n        if (mounted.current) {\n          setStatus({ success: false });\n          setErrors({ submit: err.message });\n          setSubmitting(false);\n        }\n      }\n    }\n  });\n\n  useEffect(() => {\n    gtm.push({ event: 'page_view' });\n  }, []);\n\n  return (\n    <>\n      <Helmet>\n        <title>Verify Code | Carpatin Dashboard</title>\n      </Helmet>\n      <AppBar\n        elevation={0}\n        sx={{ backgroundColor: 'background.paper' }}\n      >\n        <Container maxWidth=\"md\">\n          <Toolbar\n            disableGutters\n            sx={{ height: 64 }}\n          >\n            <RouterLink to=\"/\">\n              <Logo variant={settings.theme === 'dark' ? 'light' : 'dark'} />\n            </RouterLink>\n          </Toolbar>\n        </Container>\n      </AppBar>\n      <Box\n        sx={{\n          backgroundColor: 'background.default',\n          minHeight: '100%',\n          pt: '64px'\n        }}\n      >\n        <Box sx={{ py: 9 }}>\n          <Container maxWidth=\"md\">\n            <Grid\n              container\n              spacing={6}\n            >\n              <Grid\n                item\n                md={6}\n                sx={{\n                  display: {\n                    md: 'block',\n                    xs: 'none'\n                  }\n                }}\n                xs={12}\n              >\n                <ProductFeatures />\n              </Grid>\n              <Grid\n                item\n                md={6}\n                xs={12}\n              >\n                <Card\n                  sx={{ backgroundColor: 'background.default' }}\n                  elevation={0}\n                >\n                  <CardContent>\n                    <form onSubmit={formik.handleSubmit}>\n                      <Typography\n                        color=\"textPrimary\"\n                        sx={{ mb: 3 }}\n                        variant=\"h4\"\n                      >\n                        Verify code\n                      </Typography>\n                      <Grid\n                        container\n                        spacing={2}\n                      >\n                        <Grid\n                          item\n                          xs={12}\n                        >\n                          <InputField\n                            autoFocus\n                            disabled={!!location.state?.username}\n                            error={Boolean(formik.touched.email && formik.errors.email)}\n                            fullWidth\n                            helperText={formik.touched.email && formik.errors.email}\n                            label=\"Email Address\"\n                            name=\"email\"\n                            onBlur={formik.handleBlur}\n                            onChange={formik.handleChange}\n                            type=\"email\"\n                            value={formik.values.email}\n                          />\n                        </Grid>\n                        <Grid\n                          item\n                          xs={12}\n                        >\n                          <InputField\n                            autoFocus={!!location.state?.username}\n                            error={Boolean(formik.touched.code && formik.errors.code)}\n                            fullWidth\n                            helperText={formik.touched.code && formik.errors.code}\n                            label=\"Verification code\"\n                            name=\"code\"\n                            onBlur={formik.handleBlur}\n                            onChange={formik.handleChange}\n                            value={formik.values.code}\n                          />\n                        </Grid>\n                        {formik.errors.submit && (\n                          <Grid\n                            item\n                            xs={12}\n                          >\n                            <FormHelperText error>\n                              {formik.errors.submit}\n                            </FormHelperText>\n                          </Grid>\n                        )}\n                        <Grid\n                          item\n                          xs={12}\n                        >\n                          <Button\n                            color=\"primary\"\n                            disabled={formik.isSubmitting}\n                            fullWidth\n                            size=\"large\"\n                            type=\"submit\"\n                            variant=\"contained\"\n                          >\n                            Verify Code\n                          </Button>\n                        </Grid>\n                      </Grid>\n                    </form>\n                  </CardContent>\n                </Card>\n              </Grid>\n            </Grid>\n          </Container>\n        </Box>\n      </Box>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}