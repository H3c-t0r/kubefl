{"ast":null,"code":"var _jsxFileName = \"/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/src/contexts/get-profile-context.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useReducer } from \"react\";\nimport PropTypes from 'prop-types';\nimport { profileAPI } from \"../api/profile\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  loading: true,\n  profile: null\n};\nconst handlers = {\n  GET_PROFILE: (state, action) => {\n    const {\n      profile\n    } = action.payload;\n    return { ...state,\n      profile,\n      loading: false\n    };\n  }\n};\n\nconst reducer = (state, action) => handlers[action.type] ? handlers[action.type](state, action) : state;\n\nexport const ProfileContext = /*#__PURE__*/createContext({ ...initialState,\n  get_profile: () => Promise.resolve()\n});\nexport const ProfileProvider = () => {\n  _s();\n\n  const {\n    children\n  } = props;\n  const {\n    state,\n    dispatch\n  } = useReducer(reducer, initialState);\n  useEffect(() => {\n    const initialize = async () => {\n      try {\n        const accessToken = window.localStorage.getItem('accessToken');\n        console.log(accessToken);\n\n        if (accessToken) {\n          const profile = await profileAPI.me(accessToken);\n          dispatch({\n            type: 'GET_PROFILE',\n            payload: {\n              loading: false,\n              profile\n            }\n          });\n        } else {\n          dispatch({\n            type: 'GET_PROFILE',\n            payload: {\n              loading: true,\n              profile: null\n            }\n          });\n        }\n      } catch (err) {\n        console.error(err);\n        dispatch({\n          type: 'GET_PROFILE',\n          payload: {\n            isAuthenticated: false,\n            user: null\n          }\n        });\n      }\n    };\n\n    initialize();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(ProfileContext.Provider, {\n    value: { ...state,\n      get_profile\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProfileProvider, \"61yEf+bMHBphzFLL672XVwM14F4=\");\n\n_c = ProfileProvider;\nProfileContext.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileProvider\");","map":{"version":3,"sources":["/Users/allan.chepkoy/cloud/kubeflow/components/zoradashboard/src/contexts/get-profile-context.js"],"names":["createContext","useEffect","useReducer","PropTypes","profileAPI","initialState","loading","profile","handlers","GET_PROFILE","state","action","payload","reducer","type","ProfileContext","get_profile","Promise","resolve","ProfileProvider","children","props","dispatch","initialize","accessToken","window","localStorage","getItem","console","log","me","err","error","isAuthenticated","user","propTypes","node","isRequired"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,UAAnC,QAAqD,OAArD;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,gBAA3B;;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,OAAO,EAAE,IADQ;AAEjBC,EAAAA,OAAO,EAAE;AAFQ,CAArB;AAKA,MAAMC,QAAQ,GAAG;AACbC,EAAAA,WAAW,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmB;AAC5B,UAAM;AAACJ,MAAAA;AAAD,QAAYI,MAAM,CAACC,OAAzB;AACA,WAAO,EACH,GAAGF,KADA;AAEHH,MAAAA,OAFG;AAGHD,MAAAA,OAAO,EAAE;AAHN,KAAP;AAKH;AARY,CAAjB;;AAWA,MAAMO,OAAO,GAAG,CAACH,KAAD,EAAQC,MAAR,KAAoBH,QAAQ,CAACG,MAAM,CAACG,IAAR,CAAR,GAC9BN,QAAQ,CAACG,MAAM,CAACG,IAAR,CAAR,CAAsBJ,KAAtB,EAA6BC,MAA7B,CAD8B,GAE9BD,KAFN;;AAIA,OAAO,MAAMK,cAAc,gBAAGf,aAAa,CAAC,EACxC,GAAGK,YADqC;AAExCW,EAAAA,WAAW,EAAE,MAAMC,OAAO,CAACC,OAAR;AAFqB,CAAD,CAApC;AAKP,OAAO,MAAMC,eAAe,GAAG,MAAM;AAAA;;AACjC,QAAM;AAAEC,IAAAA;AAAF,MAAeC,KAArB;AACA,QAAM;AAACX,IAAAA,KAAD;AAAQY,IAAAA;AAAR,MAAoBpB,UAAU,CAACW,OAAD,EAAUR,YAAV,CAApC;AAIAJ,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMsB,UAAU,GAAG,YAAY;AAC3B,UAAI;AACA,cAAMC,WAAW,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,aAA5B,CAApB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYL,WAAZ;;AACA,YAAIA,WAAJ,EAAgB;AACZ,gBAAMjB,OAAO,GAAG,MAAMH,UAAU,CAAC0B,EAAX,CAAcN,WAAd,CAAtB;AAEAF,UAAAA,QAAQ,CAAC;AACLR,YAAAA,IAAI,EAAE,aADD;AAELF,YAAAA,OAAO,EAAE;AACLN,cAAAA,OAAO,EAAE,KADJ;AAELC,cAAAA;AAFK;AAFJ,WAAD,CAAR;AAOH,SAVD,MAUO;AACHe,UAAAA,QAAQ,CAAC;AACLR,YAAAA,IAAI,EAAE,aADD;AAELF,YAAAA,OAAO,EAAE;AACLN,cAAAA,OAAO,EAAE,IADJ;AAELC,cAAAA,OAAO,EAAE;AAFJ;AAFJ,WAAD,CAAR;AAOH;AAEJ,OAvBD,CAuBE,OAAOwB,GAAP,EAAY;AACVH,QAAAA,OAAO,CAACI,KAAR,CAAcD,GAAd;AACAT,QAAAA,QAAQ,CAAC;AACLR,UAAAA,IAAI,EAAE,aADD;AAELF,UAAAA,OAAO,EAAE;AACLqB,YAAAA,eAAe,EAAE,KADZ;AAELC,YAAAA,IAAI,EAAE;AAFD;AAFJ,SAAD,CAAR;AAOH;AACJ,KAlCD;;AAoCAX,IAAAA,UAAU;AACb,GAtCQ,EAsCN,EAtCM,CAAT;AAwCA,sBACI,QAAC,cAAD,CAAgB,QAAhB;AACI,IAAA,KAAK,EAAE,EACH,GAAGb,KADA;AAEHM,MAAAA;AAFG,KADX;AAAA,cAMKI;AANL;AAAA;AAAA;AAAA;AAAA,UADJ;AAUH,CAxDM;;GAAMD,e;;KAAAA,e;AA0DbJ,cAAc,CAACoB,SAAf,GAA2B;AACvBf,EAAAA,QAAQ,EAAEjB,SAAS,CAACiC,IAAV,CAAeC;AADF,CAA3B","sourcesContent":["import { createContext, useEffect, useReducer } from \"react\";\nimport PropTypes from 'prop-types';\nimport { profileAPI } from \"../api/profile\";\n\nconst initialState = {\n    loading: true,\n    profile: null\n}\n\nconst handlers = {\n    GET_PROFILE: (state, action) => {\n        const {profile} = action.payload;\n        return {\n            ...state,\n            profile,\n            loading: false\n        };\n    }\n};\n\nconst reducer = (state, action) => (handlers[action.type]\n    ? handlers[action.type](state, action)\n    : state);\n\nexport const ProfileContext = createContext({\n    ...initialState,\n    get_profile: () => Promise.resolve(),\n});\n\nexport const ProfileProvider = () => {\n    const { children } = props;\n    const {state, dispatch} = useReducer(reducer, initialState);\n\n    \n\n    useEffect(() => {\n        const initialize = async () => {\n            try {\n                const accessToken = window.localStorage.getItem('accessToken');\n                console.log(accessToken)\n                if (accessToken){\n                    const profile = await profileAPI.me(accessToken);\n\n                    dispatch({\n                        type: 'GET_PROFILE',\n                        payload: {\n                            loading: false,\n                            profile\n                        }\n                    });\n                } else {\n                    dispatch({\n                        type: 'GET_PROFILE',\n                        payload: {\n                            loading: true,\n                            profile: null\n                        }\n                    });\n                }\n\n            } catch (err) {\n                console.error(err);\n                dispatch({\n                    type: 'GET_PROFILE',\n                    payload: {\n                        isAuthenticated: false,\n                        user: null\n                    }\n                });\n            }\n        };\n\n        initialize();\n    }, []);\n\n    return (\n        <ProfileContext.Provider\n            value={{\n                ...state,\n                get_profile\n            }}\n        >\n            {children}\n        </ProfileContext.Provider>\n    );\n};\n\nProfileContext.propTypes = {\n    children: PropTypes.node.isRequired\n}"]},"metadata":{},"sourceType":"module"}